<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invitaci칩n de Boda</title>

<!-- Fuentes -->
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Great+Vibes&family=Montserrat&display=swap" rel="stylesheet">

<!-- Iconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* Video de fondo centrado */
#fondoVideo {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  min-width: 100%;
  min-height: 100%;
  object-fit: cover;
  z-index: -2;
}

/* Overlay para mejorar legibilidad */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.2); 
  backdrop-filter: blur(5px);
  z-index: -1;
}

/* Contenedor principal */
body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  text-align: center;
  padding: 1rem;
  color: #960018; /* rojo intenso para texto general */
}

/* Tarjeta de invitaci칩n */
.card-romantica {
  max-width: 600px;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 25px;
  padding: 2rem;
  box-shadow: 0 8px 25px rgba(0,0,0,0.25);
  animation: fadeIn 2s ease-in-out;
  color: #960018; /* asegurar que todo dentro sea rojo */
}

/* T칤tulos */
h1 {
  font-family: 'Great Vibes', cursive;
  font-size: 3rem;
  margin-bottom: 0.2rem;
  color: #960018; /* rojo intenso */
}
h2 {
  font-family: 'Dancing Script', cursive;
  font-size: 2rem;
  margin-top: 0;
  color: #960018; /* rojo intenso */
}
h3 {
  font-family: 'Dancing Script', cursive;
  font-size: 1.5rem;
  margin: 0.5rem 0;
  color: #960018; /* rojo intenso */
}

/* Separadores decorativos */
.separador {
  border: 0;
  height: 2px;
  width: 80%;
  margin: 2rem auto;
  background: linear-gradient(to right, transparent, #960018, transparent); /* rojo degradado */
}

/* Contador */
.contador {
  font-size: 1.2rem;
  font-weight: bold;
  margin: 1rem 0;
  color: #960018; /* rojo intenso */
}

/* Botones */
.btn {
  font-family: 'Dancing Script', cursive;
  font-size: 1.1rem;
  color: #fff;
  background: #960018; /* rojo s칩lido */
  border: none;
  padding: 0.8rem 1.6rem;
  border-radius: 999px;
  cursor: pointer;
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
  margin-top: 1rem;
  transition: transform 0.3s, box-shadow 0.3s;
}
.btn:hover {
  transform: scale(1.08);
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  background: #d50000; /* rojo m치s oscuro al pasar mouse */
}

/* Animaciones */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Responsive */
@media (max-width: 768px) {
  h1 { font-size: 2.2rem; }
  h2 { font-size: 1.5rem; }
  .card-romantica { padding: 1.5rem; }
}
</style>
</head>
<body>

<!-- Video de fondo silencioso -->
<video autoplay muted loop id="fondoVideo">
  <source src="video-fondo.mp4" type="video/mp4">
  Tu navegador no soporta videos HTML5
</video>

<div class="overlay"></div>

<!-- Tarjeta de invitaci칩n -->
<div class="card-romantica">
  <h1>Jonatan & Ludmila</h1>
  <h2><i class="fa-solid fa-heart"></i> 춰Nos casamos! <i class="fa-solid fa-heart"></i></h2>

  <hr class="separador">

  <p class="contador">Faltan: <span id="contador"></span></p>

  <hr class="separador">

  <h2>Hola, los invitamos a nuestra boda</h2>
  <h3 id="nombreInvitado">Invitado</h3>

  <!-- Selecci칩n de invitados -->
  <p>쮺u치ntos asistir치n?</p>
  <select id="invitadosSelect">
    <option value="1">1 Persona</option>
    <option value="2">2 Personas</option>
    <option value="3">3 Personas</option>
    <option value="4">4 Personas</option>
  </select>

  <br><br>

  <!-- Bot칩n para confirmar asistencia -->
  <button class="btn" id="btnConfirmar">游눏 Confirmar Asistencia</button>

  <br><br>

  <!-- Bot칩n de m칰sica -->
  <button class="btn" id="btnMusica">游꿧 Reproducir M칰sica</button>

  <br><br>
  <!-- Bot칩n de ubicaci칩n -->
  <a href="https://maps.app.goo.gl/dE5ZwpyMcKssvmyQ6" target="_blank" class="btn">游늸 Ver Ubicaci칩n del Sal칩n</a>
</div>

<!-- M칰sica separada -->
<audio id="musicaFondo" loop>
  <source src="a-thousand-years.mp3" type="audio/mp3">
</audio>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getFirestore, doc, getDoc, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCH6S96lGMbUManPhCkXqHFQGPCdJ_7hkg",
    authDomain: "invitacion-boda-14.firebaseapp.com",
    projectId: "invitacion-boda-14",
    storageBucket: "invitacion-boda-14.firebasestorage.app",
    messagingSenderId: "792408500001",
    appId: "1:792408500001:web:7c0998db3821fe03280060"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const urlParams = new URLSearchParams(window.location.search);
  const invitadoID = urlParams.get('id') || 'fam1'; // default fam1 si no hay ID

  const nombreInvitado = document.getElementById('nombreInvitado');
  const selectInvitados = document.getElementById("invitadosSelect");

  async function cargarInvitado() {
    const docRef = doc(db, "invitados", invitadoID);
    const docSnap = await getDoc(docRef);
    if (docSnap.exists()) {
      const data = docSnap.data();
      nombreInvitado.textContent = data.nombre || "Invitado";

      // 游댳 Generar din치micamente el select seg칰n maxInvitados
      selectInvitados.innerHTML = ""; // limpiamos primero
      const max = data.maxInvitados || 1;
      for (let i = 1; i <= max; i++) {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = i === 1 ? "1 Persona" : `${i} Personas`;
        selectInvitados.appendChild(option);
      }
    } else {
      nombreInvitado.textContent = "Invitado";
      selectInvitados.innerHTML = "<option value='1'>1 Persona</option>";
    }
  }

  cargarInvitado();

  // Contador de d칤as
  const fechaBoda = new Date("Feb 14, 2026 18:00:00").getTime();
  const contador = document.getElementById("contador");
  setInterval(() => {
    const ahora = new Date().getTime();
    const diff = fechaBoda - ahora;
    const meses = Math.floor(diff / (1000 * 60 * 60 * 24 * 30));
    const dias = Math.floor((diff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));
    const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const segundos = Math.floor((diff % (1000 * 60)) / 1000);
    contador.innerHTML = `${meses} meses ${dias} d칤as ${horas}h ${minutos}m ${segundos}s`;
  }, 1000);

  // Bot칩n de m칰sica
  const btnMusica = document.getElementById("btnMusica");
  const musica = document.getElementById("musicaFondo");
  btnMusica.addEventListener("click", () => {
    if (musica.paused) {
      musica.play();
      btnMusica.textContent = "游댆 Pausar M칰sica";
    } else {
      musica.pause();
      btnMusica.textContent = "游꿧 Reproducir M칰sica";
    }
  });

  // Confirmaci칩n de asistencia
  const btnConfirmar = document.getElementById("btnConfirmar");
  btnConfirmar.addEventListener("click", async () => {
    const numPersonas = selectInvitados.value;
    try {
      await addDoc(collection(db, "confirmaciones"), {
        invitadoID,
        numPersonas: parseInt(numPersonas),
        timestamp: serverTimestamp()
      });
      alert(`춰Gracias por confirmar! N칰mero de invitados: ${numPersonas}`);
    } catch (error) {
      console.error("Error al guardar confirmaci칩n:", error);
      alert("Ocurri칩 un error, intenta nuevamente.");
    }
  });
</script>
</body>
</html>


